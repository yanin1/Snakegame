<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>‡πÄ‡∏Å‡∏°‡∏á‡∏π‡∏Å‡∏¥‡∏ô‡πÑ‡∏Ç‡πà (Snake Game)</title>
  <style>
    :root{--bg:#0b1220;--panel:#0f1724;--accent:#ffd54a;--snake:#66ff99}
    *{box-sizing:border-box}
    html, body {
      margin: 0;
      height: 100%;
      overscroll-behavior: none;
      touch-action: none; /* ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤ */
    }
    body{
      display:flex;
      align-items:center;
      justify-content:center;
      background:linear-gradient(180deg,#071021 0%,#0b1220 100%);
      font-family:system-ui,-apple-system,Segoe UI,Roboto,'Noto Sans',sans-serif;
      color:#e6eef8;
    }
    .wrap{display:grid;grid-template-columns:360px 1fr;gap:18px;padding:18px;width:min(900px,96vw)}
    .panel{background:var(--panel);padding:14px;border-radius:12px;box-shadow:0 6px 18px rgba(2,6,23,0.6)}
    .left{display:flex;flex-direction:column;gap:12px}
    h1{margin:0;font-size:18px}
    .score{font-size:20px;font-weight:700;color:var(--accent)}
    canvas{background:linear-gradient(180deg,#061426,#071834);display:block;border-radius:8px;max-width:100%;height:auto}
    .controls{display:flex;gap:8px;flex-wrap:wrap}
    button{background:#0e1622;border:1px solid rgba(255,255,255,0.03);padding:8px 10px;border-radius:8px;color:#eaf4ff;cursor:pointer}
    button.primary{background:var(--accent);color:#071422;font-weight:700}
    .hint{font-size:13px;color:#a8c0d9}
    .footer{font-size:13px;color:#98b6d6}
    @media (max-width:750px){.wrap{grid-template-columns:1fr;}}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="panel left">
      <h1>‡πÄ‡∏Å‡∏°‡∏á‡∏π‡∏Å‡∏¥‡∏ô‡πÑ‡∏Ç‡πà üêçü•ö</h1>
      <div class="score">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: <span id="score">0</span></div>
      <div class="controls">
        <button id="startBtn" class="primary">‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°</button>
        <button id="pauseBtn">‡∏´‡∏¢‡∏∏‡∏î / ‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏ï‡πà‡∏≠</button>
        <button id="resetBtn">‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà</button>
      </div>
      <p class="hint">‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏î‡πâ‡∏ß‡∏¢‡∏õ‡∏∏‡πà‡∏°‡∏•‡∏π‡∏Å‡∏®‡∏£ ‡∏´‡∏£‡∏∑‡∏≠ ‡∏õ‡∏±‡∏î‡∏ö‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠</p>
      <div style="margin-top:8px">
        <label for="speed">‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß: </label>
        <input id="speed" type="range" min="4" max="18" value="9">
      </div>
      <hr style="border:none;border-top:1px solid rgba(255,255,255,0.03);margin:12px 0">
      <div class="footer">‡∏ß‡∏¥‡∏ò‡∏µ‡πÄ‡∏•‡πà‡∏ô: ‡∏Å‡∏¥‡∏ô‡πÑ‡∏Ç‡πà‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏ß ‡∏´‡∏•‡∏µ‡∏Å‡πÄ‡∏•‡∏µ‡πà‡∏¢‡∏á‡∏Å‡∏≤‡∏£‡∏ä‡∏ô‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á‡∏´‡∏£‡∏∑‡∏≠‡∏Ç‡∏≠‡∏ö‡πÄ‡∏Ç‡∏ï</div>
    </div>

    <div class="panel right">
      <canvas id="game" width="600" height="400"></canvas>
    </div>
  </div>

  <script>
    // Simple Snake Game
    const canvas = document.getElementById('game');
    const ctx = canvas.getContext('2d');
    const scoreEl = document.getElementById('score');
    const startBtn = document.getElementById('startBtn');
    const pauseBtn = document.getElementById('pauseBtn');
    const resetBtn = document.getElementById('resetBtn');
    const speedRange = document.getElementById('speed');

    const COLS = 30, ROWS = 20;
    let cellW = Math.floor(canvas.width / COLS);
    let cellH = Math.floor(canvas.height / ROWS);

    let snake, dir, egg, score = 0;
    let running = false, paused = false;
    let tickInterval = null;

    function resetGame(){
      snake = [ {x:14,y:10}, {x:13,y:10}, {x:12,y:10} ];
      dir = {x:1,y:0};
      placeEgg();
      score = 0;
      running = false;
      paused = false;
      scoreEl.textContent = score;
      clearInterval(tickInterval);
      draw();
    }

    function placeEgg(){
      while(true){
        const x = Math.floor(Math.random()*COLS);
        const y = Math.floor(Math.random()*ROWS);
        if(!snake.some(s=>s.x===x && s.y===y)){
          egg = {x,y};
          return;
        }
      }
    }

    function drawCell(x,y,fill){
      const px = x*cellW;
      const py = y*cellH;
      ctx.fillStyle = fill;
      ctx.fillRect(px+1, py+1, cellW-2, cellH-2);
    }

    function draw(){
      ctx.fillStyle = '#071834';
      ctx.fillRect(0,0,canvas.width, canvas.height);
      drawEgg(egg.x, egg.y);
      for(let i=0;i<snake.length;i++){
        const s = snake[i];
        const color = i===0 ? '#66ff99' : '#4bd27c';
        drawCell(s.x, s.y, color);
      }
    }

    function drawEgg(x,y){
      const px = x*cellW + cellW/2;
      const py = y*cellH + cellH/2;
      const r = Math.min(cellW,cellH)*0.34;
      ctx.beginPath();
      ctx.ellipse(px,py,r*0.85,r,0,0,Math.PI*2);
      ctx.fillStyle='#fff4e0'; ctx.fill();
      ctx.beginPath();
      ctx.ellipse(px,py+r*0.08,r*0.45,r*0.35,0,0,Math.PI*2);
      ctx.fillStyle='#ffd54a'; ctx.fill();
    }

    function gameTick(){
      if(!running || paused) return;
      const head = {x: snake[0].x + dir.x, y: snake[0].y + dir.y};
      if(head.x < 0 || head.x >= COLS || head.y < 0 || head.y >= ROWS) return gameOver();
      if(snake.some(s => s.x===head.x && s.y===head.y)) return gameOver();
      snake.unshift(head);
      if(head.x === egg.x && head.y === egg.y){
        score += 10; scoreEl.textContent = score; placeEgg();
      } else snake.pop();
      draw();
    }

    function setSpeedFromRange(){
      const val = Number(speedRange.value);
      const ms = Math.round(200 - (val-4)*12);
      clearInterval(tickInterval);
      tickInterval = setInterval(gameTick, ms);
    }

    function startGame(){
      if(!running){ running = true; paused = false; }
      setSpeedFromRange();
    }
    function togglePause(){ if(running) paused = !paused; }

    function gameOver(){
      running = false; paused = false; clearInterval(tickInterval);
      ctx.fillStyle='rgba(0,0,0,0.45)'; ctx.fillRect(0,0,canvas.width,canvas.height);
      ctx.fillStyle='#fff'; ctx.font='28px system-ui'; ctx.textAlign='center';
      ctx.fillText('‡πÄ‡∏Å‡∏°‡∏à‡∏ö! ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: ' + score, canvas.width/2, canvas.height/2 - 8);
      ctx.font='16px system-ui';
      ctx.fillText('‡∏Å‡∏î ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏° ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡πà‡∏ô‡πÉ‡∏´‡∏°‡πà', canvas.width/2, canvas.height/2 + 22);
    }

    window.addEventListener('keydown', e=>{
      const k=e.key;
      if(['ArrowUp','ArrowDown','ArrowLeft','ArrowRight'].includes(k)) e.preventDefault();
      if(k==='ArrowUp'||k==='w'||k==='W') tryDir(0,-1);
      if(k==='ArrowDown'||k==='s'||k==='S') tryDir(0,1);
      if(k==='ArrowLeft'||k==='a'||k==='A') tryDir(-1,0);
      if(k==='ArrowRight'||k==='d'||k==='D') tryDir(1,0);
      if(k===' ') togglePause();
    });

    function tryDir(x,y){
      if(snake.length>1 && snake[0].x+x===snake[1].x && snake[0].y+y===snake[1].y) return;
      dir={x,y};
    }

    (function addTouchControls(){
      let startX=0,startY=0;
      canvas.addEventListener('touchstart', e=>{
        if(e.touches.length===1){
          startX = e.touches[0].clientX;
          startY = e.touches[0].clientY;
        }
      });
      canvas.addEventListener('touchend', e=>{
        const endX=e.changedTouches[0].clientX;
        const endY=e.changedTouches[0].clientY;
        const dx=endX-startX, dy=endY-startY;
        if(Math.abs(dx)>Math.abs(dy)){
          if(dx>20) tryDir(1,0);
          else if(dx<-20) tryDir(-1,0);
        } else {
          if(dy>20) tryDir(0,1);
          else if(dy<-20) tryDir(0,-1);
        }
      });
    })();

    // ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏Ç‡∏ì‡∏∞‡πÄ‡∏•‡πà‡∏ô
    document.body.addEventListener('touchmove', e => e.preventDefault(), { passive: false });

    startBtn.addEventListener('click', startGame);
    pauseBtn.addEventListener('click', togglePause);
    resetBtn.addEventListener('click', resetGame);
    speedRange.addEventListener('input', setSpeedFromRange);

    resetGame();
  </script>
</body>
</html>
